# 写倾斜

两个并发写同时发生，更改不同对象，如果串行执行，则有一个不应该发生，但是当并发执行的时候，由于数据库正在使用快照级别的隔离，因此，它们读了一样的数据，都满足条件，从而都更新成功，最终导致违反了程序的一些约定行检查。

简单来说就是，在快照级别隔离下，串行执行至少失败一个的并发写，在并发执行的时候都成功了，从而未被了系统的约定行检查。

原因：快照级别隔离无法应对这种并发写伴随约定性检查的场景。这种约定行检查往往是上层应用层所带来的。

# 解决方法

## 实体化冲突

如果问题的关键是查询结果中没有对象（空）可以加锁，或许可以认为引入一些可加锁对象？

思想是，将这种问题转化为具体的锁冲突问题。但是往往实现上容易出错，一般不采用实体化冲突，可采用[可串行化隔离方案](./可串行化.md)
